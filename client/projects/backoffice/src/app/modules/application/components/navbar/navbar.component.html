<div class="flex justify-start">
  <a href="javascript.void(0)" [routerLink]="logoRouterLink">
    <span class="sr-only">Xyz</span>
    <img class="mx-auto h-10 w-auto" [src]="logoSrc" alt="Xyz Logo" />
  </a>
</div>
<div class="navbar-toggler md:hidden">
  <button type="button" class="navbar-toggler-btn" aria-expanded="false" (click)="toggleMobile()">
    <span class="sr-only">Open menu</span>
    <ng-icon name="hero-menu" size="1.5rem"></ng-icon>
  </button>
  <div *ngIf="isMobileShown" [@fadeAnimation] class="absolute z-10 right-0 mt-3 transform px-4 w-full ">
    <div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden">
      <div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
        <div class="bg-primary-50 rounded-lg flex flex-row items-center">
          <input 
              class="bg-transparent w-full border-none focus:shadow-none focus:ring-0 text-primary-600" 
              type="text"/>
          <ng-icon class="text-primary-600 mr-4" name="hero-search"></ng-icon>
        </div>
        <ng-container *ngFor="let link of links">
          <button (click)="expandLink($event, link)" type="button" class="group text-base font-medium text-white border-transparent hover:text-primary-100 mr-6" aria-expanded="false">
            <span>{{ link.label }}</span>
            <ng-icon 
                *ngIf="link?.children?.length"
                name="hero-chevron-down" 
                size="1rem" 
                class="ml-2 text-white group-hover:text-primary-100">
            </ng-icon>
          </button>
          <!-- <ng-contianer 
              [ngTemplateOutlet]="link?.children?.length ? navItemWithDropdown : navItemLink"
              [ngTemplateOutletContext]="{ link: link }">
          </ng-contianer> -->
        </ng-container>
      </div>
    </div>
  </div>
</div>

<nav class="navbar-nav">
  <div class="relative" *ngFor="let link of links">
    <ng-contianer 
        [ngTemplateOutlet]="link?.children?.length ? navItemWithDropdown : navItemLink"
        [ngTemplateOutletContext]="{ link: link }">
    </ng-contianer>
  </div>
</nav>

<!-- Navigation Menu Right -->
<div class="navbar-nav items-center justify-end md:flex-1 lg:w-0">
  <div class="relative">
    <button type="button" class="group text-base text-white font-medium inline-flex items-center mr-7 hover:text-primary-100" aria-expanded="false">
      <span class="relative inline-block">
        <ng-icon class="text-white group-hover:text-primary-100" name="hero-mail-solid" size="1.5rem"></ng-icon>
        <span class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-danger-400 rounded-full">2</span>
      </span>
    </button>
  </div>
  <div class="relative">
    <button type="button" class="group text-base text-white font-medium inline-flex items-center mr-7 hover:text-primary-100" aria-expanded="false">
      <span class="relative inline-block">
        <ng-icon class="text-white group-hover:text-primary-100" name="hero-bell-solid" size="1.5rem"></ng-icon>
        <span class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-danger-400 rounded-full">12</span>
      </span>
    </button>
  </div>
  <div class="relative">
    <button type="button" class="group text-base text-white font-medium inline-flex items-center mr-7 hover:text-primary-100" aria-expanded="false">
      <span class="relative inline-block">
        <ng-icon class="text-white group-hover:text-primary-100" name="hero-calendar-solid" size="1.5rem"></ng-icon>
        <span class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-danger-400 rounded-full">4</span>
      </span>
    </button>
  </div>
  <div class="relative">
    <button type="button" class="group text-base text-white hover:text-primary-100 font-medium rounded-md inline-flex items-center mr-2" aria-expanded="false">
      <span class="relative inline-block">
        <img class="h-8 w-8 rounded-full" src="assets/images/default-avatar.svg" alt="" />
        <span class="absolute bottom-0 right-0 inline-block w-3 h-3 transform translate-x-1/2 bg-green-500 rounded-full"></span>
      </span>
      <svg class="text-white h-5 w-5 group-hover:text-primary-100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
      </svg>
    </button>
    <div class="absolute z-10 -ml-4 mt-3 transform right-0 px-2 w-screen max-w-md sm:px-0 lg:ml-0">
      <div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden">
        <div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
          <a href="#" class="-m-3 p-3 flex items-start rounded-lg hover:bg-gray-50">
            <ng-icon name="hero-user" size="1.5rem"></ng-icon>
            <div class="ml-4">
              <p class="text-base font-medium text-gray-900">
                Account Settings
              </p>
            </div>
          </a>
          <a href="javascript.void(0)" routerLink="/auth/logging-out" class="-m-3 p-3 flex items-start rounded-lg hover:bg-gray-50">
            <ng-icon name="hero-logout" size="1.5rem"></ng-icon>
            <div class="ml-4">
              <p class="text-base font-medium text-gray-900">
                Log Out
              </p>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

  <ng-template #navItemWithDropdown let-link="link">
    <!-- @TODO - Fix this, do not use ngif on dropdown, add classes per tailwind docs -->
    <button (click)="expandLink($event, link)" type="button" class="group text-base font-medium text-white border-transparent hover:text-primary-100 mr-6" aria-expanded="false">
      <span>{{ link.label }}</span>
      <ng-icon 
          *ngIf="link?.children?.length"
          name="hero-chevron-down" 
          size="1rem" 
          class="ml-2 text-white group-hover:text-primary-100">
      </ng-icon>
    </button>
    <!-- Child dropdown links -->
    <div *ngIf="link?.children?.length && link.isExpanded" [@fadeAnimation] class="absolute z-10 -ml-4 mt-3 transform px-2 w-screen max-w-md sm:px-0 lg:ml-0">
      <div class="rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden">
        <div class="relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8">
          <a *ngFor="let child of link?.children" href="javascript.void(0)" [routerLink]="[child.routerLink]" class="-m-3 p-3 flex items-start rounded-lg hover:bg-gray-50">
            <ng-icon [name]="child?.iconName || ''" size="1.5em"></ng-icon>
            <div class="ml-4">
              <p class="text-base font-medium text-gray-900">{{ child.label }}</p>
              <p class="mt-1 text-sm text-gray-500">{{ child.description }}</p>
            </div>
          </a>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #navItemLink let-link="link">
    <a href="javascript.void(0)" [routerLink]="[link.routerLink]" type="button" class="group text-base font-medium text-white border-transparent hover:text-primary-100 mr-6" aria-expanded="false">
      <span>{{ link.label }}</span>
      <ng-icon 
          *ngIf="link?.children?.length"
          name="hero-chevron-down" 
          size="1rem" 
          class="ml-2 text-white group-hover:text-primary-100">
      </ng-icon>
    </a>
  </ng-template>
  